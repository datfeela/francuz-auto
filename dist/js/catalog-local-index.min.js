function setCookie(e,t,o={}){(o={path:"/",...o}).expires instanceof Date&&(o.expires=o.expires.toUTCString());let n=encodeURIComponent(e)+"="+encodeURIComponent(t);for(let e in o){n+="; "+e;let t=o[e];!0!==t&&(n+="="+t)}document.cookie=n}function getCookie(e){let t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function deleteCookie(e){setCookie(e,"",{"max-age":-1})}function changeCookie(e,t,o){changeQuantity(e.closest(t).href.split("id=")[1],o),changeQuantity("totalQuantity",o)}function changeQuantity(e,t){null==getCookie(e)?setCookie(e,t,{sameSite:"Strict",expires:"Tue, 19 Jan 2038 03: 14: 07 GMT"}):(setCookie(e,+getCookie(e)+t,{sameSite:"Strict",expires:"Tue, 19 Jan 2038 03: 14: 07 GMT"}),0==getCookie(e)&&deleteCookie(e))}document.addEventListener("DOMContentLoaded",(e=>{"dark"==getCookie("theme")&&(document.querySelector("body").classList.add("dark-theme"),document.querySelector(".theme-changer__button").classList.add("_active"))})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("body");header=document.querySelector(".header"),headerBurger=document.querySelector(".search-header__burger"),headerDropdownMenu=document.querySelector(".search-header__dropdown"),headerSearch=document.querySelector(".search-header"),headerSearchLowres=document.querySelector(".search-header__button_lowres"),headerSearchForm=document.querySelector(".search-header__item"),headerSearchInput=document.querySelector(".search-header__input"),themeChangerButton=document.querySelector(".theme-changer__button");new IntersectionObserver((function(e,t){e[0].isIntersecting?header.classList.remove("_scroll"):header.classList.add("_scroll")})).observe(header);const t=document.querySelector(".announcement-header__close-button");"hidden"==getCookie("announcement")&&(t.parentNode.style.transition="none",t.parentNode.classList.add("_hidden"),header.classList.add("_no-announcement")),t.addEventListener("click",(()=>{t.parentNode.classList.add("_hidden"),header.classList.add("_no-announcement");let e=new Date;e.setHours(e.getHours()+1),e=e.toUTCString(),setCookie("announcement","hidden",{sameSite:"Strict",expires:e})}));let o=document.querySelector(".search-header__counter");function n(e){e.classList.remove("_hover"),e.lastElementChild.classList.contains("dropdown-menu__sublist")&&Array.from(e.lastElementChild.children).forEach((e=>{e.classList.contains("_hover")&&(n(e),e.classList.remove("_hover"))}))}null!=getCookie("totalQuantity")&&(o.innerHTML=getCookie("totalQuantity")),"0"!=o.innerHTML&&o.classList.add("_active"),headerBurger.addEventListener("click",(t=>{Array.from(headerDropdownMenu.querySelector(".dropdown-menu__list").children).forEach((e=>{e.classList.contains("_hover")&&n(e)})),headerBurger.classList.toggle("_active"),document.documentElement.clientWidth<=720&&e.classList.add("_no-scroll")})),document.addEventListener("click",(t=>{const o=t.target;(!o.closest(".search-header__burger")&&!o.closest(".search-header__dropdown")||o.closest(".dropdown-menu__free-space-cover")||o.closest(".dropdown-menu__close-button"))&&headerBurger.classList.contains("_active")&&(Array.from(headerDropdownMenu.querySelector(".dropdown-menu__list").children).forEach((e=>{e.classList.contains("_hover")&&n(e)})),headerBurger.classList.remove("_active"),document.documentElement.clientWidth<=720&&e.classList.remove("_no-scroll"))})),window.addEventListener("resize",(t=>{document.documentElement.clientWidth>720&&e.classList.contains("_no-scroll")&&e.classList.remove("_no-scroll")})),headerDropdownMenu.addEventListener("mouseover",(e=>{const t=e.target;let o;t.closest(".dropdown-menu__item")&&(t.closest(".dropdown-menu__item").classList.add("_hover"),o=Array.from(t.closest(".dropdown-menu__item").parentNode.children),o.forEach((e=>{t.closest(".dropdown-menu__item")!=e&&e.classList.contains("_hover")&&n(e)})))})),headerSearch.addEventListener("click",(e=>{const t=e.target;document.documentElement.clientWidth<720&&(t.closest(".search-header__button_lowres")||t.closest(".search-header__icon_close"))&&(headerSearchLowres.classList.toggle("_active"),headerSearchForm.classList.toggle("_active"))})),document.addEventListener("click",(e=>{const t=e.target;document.documentElement.clientWidth<720&&!t.closest(".search-header__item")&&!t.closest(".search-header__button_lowres")&&headerSearchForm.classList.contains("_active")&&(headerSearchLowres.classList.remove("_active"),headerSearchForm.classList.remove("_active"))})),themeChangerButton.addEventListener("click",(t=>{e.classList.contains("dark-theme")?setCookie("theme","bright",{sameSite:"Strict",expires:"Tue, 19 Jan 2038 03: 14: 07 GMT"}):setCookie("theme","dark",{sameSite:"Strict",expires:"Tue, 19 Jan 2038 03: 14: 07 GMT"}),themeChangerButton.classList.toggle("_active"),e.classList.toggle("dark-theme")}))})),document.addEventListener("DOMContentLoaded",(()=>{const e=new URL(location.href).searchParams.get("cat"),t=document.querySelector(".catalog__items"),o=document.querySelector("title"),n=(document.querySelector(".search-header__counter"),document.querySelector(".catalog__load-more-button")),r=document.querySelector(".sidebar__filters");let c=[],s=[],a=0;function i(e){searchResultCover=document.querySelector(".items-catalog__cover"),a+20<e.length?(productsToLoadCount=20,n.classList.remove("_blocked")):(productsToLoadCount=e.length-a,n.classList.add("_blocked"));for(let o=a;o<a+productsToLoadCount;o++){let n=e[o];const r=n.col1,c=n.col2,s=n.col4,a=n.col6;let i=r+"_"+c;r.split(" ")[1]&&(i=r.split(" ")[0]+"_"+r.split(" ")[1]+"_"+c);let d=`\n                <a href="product.html?id=${i}" class="items-catalog__row product">\n                    <div class="product__block product__block_brand">\n                        <span class="product__text product__text_brand">${r}_${c}</span>\n                    </div>\n                    <div class="product__block product__block_description">\n                        <span class="product__text product__text_description">${s}</span>\n                    </div>\n                    <div class="product__block product__block_price">\n                        <span class="product__text product__text_price">${a}₽</span>\n                    </div>\n                    <button class="product__button product__button_buy button" type="button">\n                        <span class="product__button-text button__text">В корзину</span>\n                    </button>\n                </a>\n                `;t.insertAdjacentHTML("beforeend",d)}a+=productsToLoadCount,searchResultCover.classList.add("_hidden")}function d(e,o){const n=document.querySelector("#brands-filter");let r=[];if(s=[],Array.from(n.children).forEach((e=>{1==e.firstElementChild.checked&&r.push(e.firstElementChild.name)})),1==e)r.push(o);else{let e=r.findIndex((function(e,t,n){if(e==o)return e}));r.splice(e,1)}c.forEach((e=>{r.forEach((t=>{t==e.col1&&s.push(e)}))})),Array.from(t.querySelectorAll(".items-catalog__row")).forEach((e=>{e.remove()})),a=0,i(s)}!function(){let t;const n=document.querySelector(".catalog__title");switch(e){case"oil":t="Масла и жидкости";break;case"lamps":t="Лампы";break;case"filters":t="Фильтры"}n.insertAdjacentText("beforeend",t),o.insertAdjacentText("beforeend",`${t} | Француз-Авто`)}(),async function(){let t=await fetch("json/data.json",{method:"GET"});if(t.ok){!function(t){let o;switch(e){case"oil":o="МАСЛА и жидкости";break;case"lamps":o="лампа";break;case"filters":o="фильтры"}c=t.filter((e=>e.col9==o)),function(e){let t=[e[0].col1];const o=document.querySelector("#brands-filter");e.forEach((e=>{let o=0;t.forEach((t=>{t==e.col1&&(o=1)})),0==o&&t.push(e.col1)})),t.forEach((e=>{o.insertAdjacentHTML("beforeend",`\n                <div class="options-filter__item">\n                    <input id="${e}" class="options-filter__checkbox" type="checkbox" name="${e}" value="${e}" />\n                    <label class="options-filter__label" for="${e}"> ${e} </label>\n                </div>\n            `)}))}(c),i(c)}(await t.json())}else alert("something went wrong...")}(),n.addEventListener("click",(()=>{s.length>0&&a<s.length?i(s):a<c.length&&i(c)})),r.addEventListener("click",(e=>{const o=e.target;"options-filter__label"==o.className&&"brands-filter"==o.parentNode.parentNode.id&&(o.previousElementSibling.checked?(d(0,o.previousElementSibling.name),0==t.querySelectorAll(".items-catalog__row").length&&i(c)):d(1,o.previousElementSibling.name))}))})),document.addEventListener("DOMContentLoaded",(()=>{$(".title-footer").click((function(){document.documentElement.clientWidth<=560&&($(this).next().slideToggle(),$(this).next().hasClass("contacts-footer__wrapper")&&$(this).next().css("display","flex"),$(this).toggleClass("_active"))})),$(window).resize((function(){document.documentElement.clientWidth>560&&($(".title-footer").next().css("display","block"),$(".title-footer").next().hasClass("contacts-footer__wrapper")&&$(".contacts-footer__wrapper").css("display","flex"),$(".title-footer").hasClass("_active")&&$(".title-footer").removeClass("_active")),document.documentElement.clientWidth<=560&&($(".title-footer").hasClass("_active")||$(".title-footer").next().css("display","none"))}))}));