function setCookie(e,t,n={}){(n={path:"/",...n}).expires instanceof Date&&(n.expires=n.expires.toUTCString());let o=encodeURIComponent(e)+"="+encodeURIComponent(t);for(let e in n){o+="; "+e;let t=n[e];!0!==t&&(o+="="+t)}document.cookie=o}function getCookie(e){let t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function deleteCookie(e){setCookie(e,"",{"max-age":-1})}function changeCookie(e,t,n){changeQuantity(e.closest(t).href.split("id=")[1],n),changeQuantity("totalQuantity",n)}function changeQuantity(e,t){null==getCookie(e)?setCookie(e,t,{sameSite:"Strict",expires:"Tue, 19 Jan 2038 03: 14: 07 GMT"}):(setCookie(e,+getCookie(e)+t,{sameSite:"Strict",expires:"Tue, 19 Jan 2038 03: 14: 07 GMT"}),0==getCookie(e)&&deleteCookie(e))}function fixString(e,t,n){if(-1!=e.indexOf(t)){let o=0,s="";for(;e.split(t)[o];)s+=e.split(t)[o],o++,e.split(t)[o]&&(s+=n);e=s}return e}document.addEventListener("DOMContentLoaded",(e=>{"dark"==getCookie("theme")&&(document.querySelector("body").classList.add("dark-theme"),document.querySelector(".theme-changer__button").classList.add("_active"))})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("body");header=document.querySelector(".header"),headerBurger=document.querySelector(".search-header__burger"),headerDropdownMenu=document.querySelector(".search-header__dropdown"),headerSearch=document.querySelector(".search-header"),headerSearchLowres=document.querySelector(".search-header__button_lowres"),headerSearchForm=document.querySelector(".search-header__item"),headerSearchInput=document.querySelector(".search-header__input"),themeChangerButton=document.querySelector(".theme-changer__button"),headerCart=document.querySelector(".search-header__button_buy");new IntersectionObserver((function(e,t){e[0].isIntersecting?header.classList.remove("_scroll"):header.classList.add("_scroll")})).observe(header);const t=document.querySelector(".announcement-header__close-button");"hidden"==getCookie("announcement")&&(t.parentNode.style.transition="none",t.parentNode.classList.add("_hidden"),header.classList.add("_no-announcement")),t.addEventListener("click",(()=>{t.parentNode.classList.add("_hidden"),header.classList.add("_no-announcement");let e=new Date;e.setHours(e.getHours()+1),e=e.toUTCString(),setCookie("announcement","hidden",{sameSite:"Strict",expires:e})}));let n=document.querySelector(".search-header__counter");function o(e){e.classList.remove("_hover"),e.lastElementChild.classList.contains("dropdown-menu__sublist")&&Array.from(e.lastElementChild.children).forEach((e=>{e.classList.contains("_hover")&&(o(e),e.classList.remove("_hover"))}))}null!=getCookie("totalQuantity")&&(n.innerHTML=getCookie("totalQuantity")),"0"!=n.innerHTML&&n.classList.add("_active"),headerBurger.addEventListener("click",(t=>{Array.from(headerDropdownMenu.querySelector(".dropdown-menu__list").children).forEach((e=>{e.classList.contains("_hover")&&o(e)})),headerBurger.classList.toggle("_active"),document.documentElement.clientWidth<=720&&e.classList.add("_no-scroll")})),document.addEventListener("click",(t=>{const n=t.target;(!n.closest(".search-header__burger")&&!n.closest(".search-header__dropdown")||n.closest(".dropdown-menu__free-space-cover")||n.closest(".dropdown-menu__close-button"))&&headerBurger.classList.contains("_active")&&(Array.from(headerDropdownMenu.querySelector(".dropdown-menu__list").children).forEach((e=>{e.classList.contains("_hover")&&o(e)})),headerBurger.classList.remove("_active"),document.documentElement.clientWidth<=720&&e.classList.remove("_no-scroll"))})),window.addEventListener("resize",(t=>{document.documentElement.clientWidth>720&&e.classList.contains("_no-scroll")&&e.classList.remove("_no-scroll")})),headerDropdownMenu.addEventListener("mouseover",(e=>{if(document.documentElement.clientWidth>720){const t=e.target;let n;t.closest(".dropdown-menu__item")&&(t.closest(".dropdown-menu__item").classList.add("_hover"),n=Array.from(t.closest(".dropdown-menu__item").parentNode.children),n.forEach((e=>{t.closest(".dropdown-menu__item")!=e&&e.classList.contains("_hover")&&o(e)})))}})),window.addEventListener("resize",(e=>{if(document.documentElement.clientWidth<721){let e=headerDropdownMenu.querySelector("._hover");e&&e.classList.remove("_hover")}})),header.addEventListener("click",(e=>{const t=e.target;if(t.closest(".dropdown-menu__expand-button")){const e=t.closest(".dropdown-menu__item").querySelector(".dropdown-menu__sublist"),n=t.closest(".dropdown-menu__expand-button");$(e).slideToggle(),n.classList.toggle("_active")}})),window.addEventListener("resize",(e=>{document.documentElement.clientWidth>720&&(sublistArr=Array.from(document.querySelectorAll(".dropdown-menu__sublist")),sublistArr.forEach((e=>{"none"==getComputedStyle(e).display&&(e.style.display="block")})))})),headerSearch.addEventListener("click",(e=>{const t=e.target;document.documentElement.clientWidth<720&&(t.closest(".search-header__button_lowres")||t.closest(".search-header__icon_close"))&&(headerSearchLowres.classList.toggle("_active"),headerSearchForm.classList.toggle("_active"))})),document.addEventListener("click",(e=>{const t=e.target;document.documentElement.clientWidth<720&&!t.closest(".search-header__item")&&!t.closest(".search-header__button_lowres")&&headerSearchForm.classList.contains("_active")&&(headerSearchLowres.classList.remove("_active"),headerSearchForm.classList.remove("_active"))})),themeChangerButton.addEventListener("click",(t=>{e.classList.contains("dark-theme")?setCookie("theme","bright",{sameSite:"Strict",expires:"Tue, 19 Jan 2038 03: 14: 07 GMT"}):setCookie("theme","dark",{sameSite:"Strict",expires:"Tue, 19 Jan 2038 03: 14: 07 GMT"}),themeChangerButton.classList.toggle("_active"),e.classList.toggle("dark-theme")}))})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".main__search-result"),t=document.querySelector(".search-result__title");let n=document.querySelector(".search-header__counter"),o=new URL(location.href).searchParams.get("search").toUpperCase();t.insertAdjacentText("beforeend",o),async function(t){let n=await fetch(t,{method:"GET"});if(n.ok){!function(t){const n=document.querySelector("#search-result-product"),s=document.querySelector("#search-result-analogs"),a=document.querySelector("#search-result-complects"),c=document.querySelector(".search-result__cover"),r="КОМПЛЕКТ";let d=!1,i=!1,l=!1;t.forEach((e=>{if(""!=e.col1&&o.length>2&&(e.col2==o||e.col3.includes(`; ${o} `)||0==e.col3.indexOf(`${o} `))||o.length>5&&e.col4.toUpperCase().includes(o)){const t=e.col4,c=e.col6;let u,_=e.col1,h=e.col2,m=fixString(_," ","_")+"__"+fixString(h," ","_");u=0==e.col8?"Под заказ":e.col8;let p=`\n                <a href="product?id=${m}" class="search-data__row">\n                    <div class="search-data__block search-data__block_brand">\n                        <span class="search-data__text search-data__text_brand">${_}</span>\n                    </div>\n                    <div class="search-data__block search-data__block_description">\n                        <span class="search-data__text search-data__text_description">${t}</span>\n                    </div>\n                    <div class="search-data__block search-data__block_article-number">\n                        <span class="search-data__text search-data__text_article-number">${h}</span>\n                    </div>\n                    <div class="search-data__block search-data__block_price">\n                        <span class="search-data__text search-data__text_price">${c}₽</span>\n                    </div>\n                    <div class="search-data__block search-data__block_quantity">\n                        <span class="search-data__text search-data__text_quantity">${u}</span>\n                    </div>\n                    <button class="search-data__button search-data__button_buy button" type="button">\n                        <span class="search-data__button-text button__text">В корзину</span>\n                    </button>\n                </a>\n                `;e.col2==o||o.length>5&&e.col4.toUpperCase().includes(o)?(d=!0,n.insertAdjacentHTML("beforeend",p)):e.col3.includes(o+" ")&&(e.col4.includes(r)?(l=!0,a.insertAdjacentHTML("beforeend",p)):(i=!0,s.insertAdjacentHTML("beforeend",p)))}})),(1==d||1==i||1==l)&&e.classList.add("_active");1==d&&(n.classList.add("_active"),n.previousElementSibling.classList.add("_active"));1==i&&(s.classList.add("_active"),s.previousElementSibling.classList.add("_active"));1==l&&(a.classList.add("_active"),a.previousElementSibling.classList.add("_active"));c.style.display="none"}(await n.json())}else alert("something went wrong...")}("json/data.json"),e.addEventListener("click",(e=>{const t=e.target,o=t.closest(".search-data__button_buy");o&&(e.preventDefault(),o.classList.add("onclick"),setTimeout((()=>{o.classList.remove("onclick")}),200),changeCookie(t,".search-data__row",1),document.querySelector(".search-header__counter").innerHTML=+n.innerHTML+1,"0"!=n.innerHTML&&n.classList.add("_active"))}))})),document.addEventListener("DOMContentLoaded",(()=>{$(".title-footer").click((function(){document.documentElement.clientWidth<=560&&($(this).next().slideToggle(),$(this).next().hasClass("contacts-footer__wrapper")&&$(this).next().css("display","flex"),$(this).toggleClass("_active"))})),$(window).resize((function(){document.documentElement.clientWidth>560&&($(".title-footer").next().css("display","block"),$(".title-footer").next().hasClass("contacts-footer__wrapper")&&$(".contacts-footer__wrapper").css("display","flex"),$(".title-footer").hasClass("_active")&&$(".title-footer").removeClass("_active")),document.documentElement.clientWidth<=560&&($(".title-footer").hasClass("_active")||$(".title-footer").next().css("display","none"))}))}));