function setCookie(e,t,a={}){(a={path:"/",...a}).expires instanceof Date&&(a.expires=a.expires.toUTCString());let n=encodeURIComponent(e)+"="+encodeURIComponent(t);for(let e in a){n+="; "+e;let t=a[e];!0!==t&&(n+="="+t)}document.cookie=n}function getCookie(e){let t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function deleteCookie(e){setCookie(e,"",{"max-age":-1})}function changeCookie(e,t,a){changeQuantity(e.closest(t).href.split("id=")[1],a),changeQuantity("totalQuantity",a)}function changeQuantity(e,t){null==getCookie(e)?setCookie(e,t,{sameSite:"Strict",expires:"Tue, 19 Jan 2038 03: 14: 07 GMT"}):(setCookie(e,+getCookie(e)+t,{sameSite:"Strict",expires:"Tue, 19 Jan 2038 03: 14: 07 GMT"}),0==getCookie(e)&&deleteCookie(e))}document.addEventListener("DOMContentLoaded",(e=>{"dark"==getCookie("theme")&&(document.querySelector("body").classList.add("dark-theme"),document.querySelector(".theme-changer__button").classList.add("_active"))})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("body");header=document.querySelector(".header"),headerBurger=document.querySelector(".search-header__burger"),headerDropdownMenu=document.querySelector(".search-header__dropdown"),headerSearch=document.querySelector(".search-header"),headerSearchLowres=document.querySelector(".search-header__button_lowres"),headerSearchForm=document.querySelector(".search-header__item"),headerSearchInput=document.querySelector(".search-header__input"),themeChangerButton=document.querySelector(".theme-changer__button");new IntersectionObserver((function(e,t){e[0].isIntersecting?header.classList.remove("_scroll"):header.classList.add("_scroll")})).observe(header);const t=document.querySelector(".announcement-header__close-button");"hidden"==getCookie("announcement")&&(t.parentNode.style.transition="none",t.parentNode.classList.add("_hidden"),header.classList.add("_no-announcement")),t.addEventListener("click",(()=>{t.parentNode.classList.add("_hidden"),header.classList.add("_no-announcement");let e=new Date;e.setHours(e.getHours()+1),e=e.toUTCString(),setCookie("announcement","hidden",{sameSite:"Strict",expires:e})}));let a=document.querySelector(".search-header__counter");function n(e){e.classList.remove("_hover"),e.lastElementChild.classList.contains("dropdown-menu__sublist")&&Array.from(e.lastElementChild.children).forEach((e=>{e.classList.contains("_hover")&&(n(e),e.classList.remove("_hover"))}))}null!=getCookie("totalQuantity")&&(a.innerHTML=getCookie("totalQuantity")),"0"!=a.innerHTML&&a.classList.add("_active"),headerBurger.addEventListener("click",(t=>{Array.from(headerDropdownMenu.querySelector(".dropdown-menu__list").children).forEach((e=>{e.classList.contains("_hover")&&n(e)})),headerBurger.classList.toggle("_active"),document.documentElement.clientWidth<=720&&e.classList.add("_no-scroll")})),document.addEventListener("click",(t=>{const a=t.target;(!a.closest(".search-header__burger")&&!a.closest(".search-header__dropdown")||a.closest(".dropdown-menu__free-space-cover")||a.closest(".dropdown-menu__close-button"))&&headerBurger.classList.contains("_active")&&(Array.from(headerDropdownMenu.querySelector(".dropdown-menu__list").children).forEach((e=>{e.classList.contains("_hover")&&n(e)})),headerBurger.classList.remove("_active"),document.documentElement.clientWidth<=720&&e.classList.remove("_no-scroll"))})),window.addEventListener("resize",(t=>{document.documentElement.clientWidth>720&&e.classList.contains("_no-scroll")&&e.classList.remove("_no-scroll")})),headerDropdownMenu.addEventListener("mouseover",(e=>{const t=e.target;let a;t.closest(".dropdown-menu__item")&&(t.closest(".dropdown-menu__item").classList.add("_hover"),a=Array.from(t.closest(".dropdown-menu__item").parentNode.children),a.forEach((e=>{t.closest(".dropdown-menu__item")!=e&&e.classList.contains("_hover")&&n(e)})))})),headerSearch.addEventListener("click",(e=>{const t=e.target;document.documentElement.clientWidth<720&&(t.closest(".search-header__button_lowres")||t.closest(".search-header__icon_close"))&&(headerSearchLowres.classList.toggle("_active"),headerSearchForm.classList.toggle("_active"))})),document.addEventListener("click",(e=>{const t=e.target;document.documentElement.clientWidth<720&&!t.closest(".search-header__item")&&!t.closest(".search-header__button_lowres")&&headerSearchForm.classList.contains("_active")&&(headerSearchLowres.classList.remove("_active"),headerSearchForm.classList.remove("_active"))})),themeChangerButton.addEventListener("click",(t=>{e.classList.contains("dark-theme")?setCookie("theme","bright",{sameSite:"Strict",expires:"Tue, 19 Jan 2038 03: 14: 07 GMT"}):setCookie("theme","dark",{sameSite:"Strict",expires:"Tue, 19 Jan 2038 03: 14: 07 GMT"}),themeChangerButton.classList.toggle("_active"),e.classList.toggle("dark-theme")}))})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".main__cart"),t=document.querySelector(".search-header__counter"),a=document.querySelector(".form-cart");let n=document.cookie.split("; "),s=[];function o(t){const a=e.querySelector('.search-data__row[data-id="'+t+'"]');a.classList.add("_delete"),null==a.querySelector(".search-data__delete-title")&&a.insertAdjacentHTML("beforeend",'\n            <h2 class="search-data__delete-title">Товар будет удален из корзины</h2>\n            <button class="search-data__delete-button" type="button">\n                <span class="search-data__text">Продолжить</span>\n                <svg class="search-data__icon search-data__icon_delete">\n                    <use xlink:href="#delete"></use>\n                </svg >\n            </button>\n            <button class="search-data__cancel-button" type="button">\n                <span class="search-data__text">Отмена</span>\n                <svg class="search-data__icon search-data__icon_cancel">\n                    <use xlink:href="#cancel"></use>\n                </svg >\n            </button>\n            ')}function c(){const e=Array.from(document.querySelectorAll(".search-data__row"));let t=0,a=document.querySelector(".total__total-price");e.forEach((e=>{let a=e.querySelector(".search-data__text_price").innerHTML.split("₽")[0],n=e.querySelector(".search-data__text_quantity").innerHTML;-1!=a.indexOf(",")&&(a=a.split(",")[0]+a.split(",")[1]),t+=+a*+n})),t=`${t}`.toString().replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1,"),a.innerHTML=`${t}₽`}function r(){const e=Array.from(document.querySelectorAll(".search-data__row")),t=document.querySelector(".form-cart__input_hidden");t.innerHTML="",e.forEach((e=>{const a=e.querySelector(".search-data__text_brand").innerHTML,n=e.querySelector(".search-data__text_quantity").innerHTML;t.insertAdjacentText("beforeend",`Товар: ${a}, количество: ${n};   `)}))}n.map((function(e){"announcement"!=e.split("=")[0]&&"totalQuantity"!=e.split("=")[0]&&"theme"!=e.split("=")[0]&&s.push(e)})),async function(){let e=await fetch("json/data.json",{method:"GET"});if(e.ok){!function(e){const t=document.querySelector(".cart__data"),a=document.querySelector(".cart__cover");e.forEach((e=>{s.forEach((a=>{let n=a.split("=")[0].split("_")[1],s=a.split("=")[1],o=a.split("=")[0];if(""!=e.col1&&n.length>3&&e.col2==n){const a=e.col4,n=e.col6,c=e.col8;let r=`\n                    <svg class="search-data__icon search-data__icon_exclamation">\n                        <use xlink:href="#exclamation"></use>\n                    </svg >\n                    <span class="search-data__text search-data__text_exclamation">\n                        Недостаточно в наличии (${c}).\n                        Мы закажем необходимое количество и свяжемся с вами.\n                    </span>\n                    `,d="";s>c&&(d="_active-exclamation");let i=`\n                <div data-id="${o}" data-quantity="${c}" class="search-data__row">\n                    <div class="search-data__block search-data__block_brand">\n                        <span class="search-data__text search-data__text_brand">${o}</span>\n                    </div>\n                    <a href="product.html?id=${o}" class="search-data__block search-data__block_description">\n                        <span class="search-data__text search-data__text_description">${a}</span>\n                    </a>\n                    <div class="search-data__block search-data__block_price">\n                        <span class="search-data__text search-data__text_price">${n}₽</span>\n                    </div>\n                    <div class="search-data__block search-data__block_quantity ${d}">\n                        <button class="search-data__button search-data__button_minus" type="button">-</button>\n                        <span class="search-data__text search-data__text_quantity">${s}</span>\n                        <button class="search-data__button search-data__button_plus" type="button">+</button>\n                        ${r}\n                    </div>\n                    <button class="search-data__button search-data__button_delete" type="button">\n                        <svg class="search-data__icon search-data__icon_delete">\n                            <use xlink:href="#delete"></use>\n                        </svg >\n                    </button>\n                </div>\n                `;t.insertAdjacentHTML("afterbegin",i)}}))})),a.style.display="none",c(),r()}(await e.json())}else alert("something went wrong...")}(),e.addEventListener("click",(e=>{const a=e.target;if(a.closest(".search-data__button_minus")){const e=a.closest(".search-data__button").parentNode.parentNode,n=e.dataset.id;let s=+a.closest(".search-data__button").nextElementSibling.innerHTML;a.closest(".search-data__button_minus").setAttribute("disabled",!0),s>1?(changeQuantity(n,-1),changeQuantity("totalQuantity",-1),t.innerHTML=+t.innerHTML-1,s-=1,a.closest(".search-data__button").nextElementSibling.innerHTML=s,s<=+e.dataset.quantity&&e.querySelector(".search-data__block_quantity").classList.remove("_active-exclamation")):o(n),c(),r(),a.closest(".search-data__button_minus").removeAttribute("disabled")}if(a.closest(".search-data__button_plus")){const e=a.closest(".search-data__button").parentNode.parentNode,n=e.dataset.id;let s=+a.closest(".search-data__button").previousElementSibling.innerHTML;a.closest(".search-data__button_plus").setAttribute("disabled",!0),changeQuantity(n,1),changeQuantity("totalQuantity",1),t.innerHTML=+t.innerHTML+1,s+=1,a.closest(".search-data__button").previousElementSibling.innerHTML=s,s>+e.dataset.quantity&&e.querySelector(".search-data__block_quantity").classList.add("_active-exclamation"),c(),r(),a.closest(".search-data__button_plus").removeAttribute("disabled")}if(a.closest(".search-data__button_delete")){o(a.closest(".search-data__button_delete").parentNode.dataset.id)}if(a.closest(".search-data__cancel-button")&&a.closest(".search-data__cancel-button").parentNode.classList.remove("_delete"),a.closest(".search-data__delete-button")){const e=a.closest(".search-data__delete-button").parentNode.dataset.id,n=a.closest(".search-data__delete-button").parentNode.querySelector(".search-data__text_quantity").innerHTML;a.closest(".search-data__delete-button").parentNode.remove(),c(),r(),deleteCookie(e),changeQuantity("totalQuantity",-n),getCookie("totalQuantity")?t.innerHTML=+getCookie("totalQuantity"):t.innerHTML="0"}})),a.addEventListener("submit",(()=>{setCookie("cartRequestSent","true",{sameSite:"Strict",expires:"Tue, 19 Jan 2038 03: 14: 07 GMT"})}))})),document.addEventListener("DOMContentLoaded",(()=>{$(".title-footer").click((function(){document.documentElement.clientWidth<=560&&($(this).next().slideToggle(),$(this).next().hasClass("contacts-footer__wrapper")&&$(this).next().css("display","flex"),$(this).toggleClass("_active"))})),$(window).resize((function(){document.documentElement.clientWidth>560&&($(".title-footer").next().css("display","block"),$(".title-footer").next().hasClass("contacts-footer__wrapper")&&$(".contacts-footer__wrapper").css("display","flex"),$(".title-footer").hasClass("_active")&&$(".title-footer").removeClass("_active")),document.documentElement.clientWidth<=560&&($(".title-footer").hasClass("_active")||$(".title-footer").next().css("display","none"))}))}));