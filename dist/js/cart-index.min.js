function setCookie(e,t,n={}){(n={path:"/",...n}).expires instanceof Date&&(n.expires=n.expires.toUTCString());let a=encodeURIComponent(e)+"="+encodeURIComponent(t);for(let e in n){a+="; "+e;let t=n[e];!0!==t&&(a+="="+t)}document.cookie=a}function getCookie(e){let t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function deleteCookie(e){setCookie(e,"",{"max-age":-1})}function changeCookie(e,t,n){changeQuantity(e.closest(t).href.split("id=")[1],n),changeQuantity("totalQuantity",n)}function changeQuantity(e,t){null==getCookie(e)?setCookie(e,t,{sameSite:"Strict",expires:"Tue, 19 Jan 2038 03: 14: 07 GMT"}):(setCookie(e,+getCookie(e)+t,{sameSite:"Strict",expires:"Tue, 19 Jan 2038 03: 14: 07 GMT"}),0==getCookie(e)&&deleteCookie(e))}function fixString(e,t,n){if(-1!=e.indexOf(t)){let a=0,o="";for(;e.split(t)[a];)o+=e.split(t)[a],a++,e.split(t)[a]&&(o+=n);e=o}return e}document.addEventListener("DOMContentLoaded",(e=>{"dark"==getCookie("theme")&&(document.querySelector("body").classList.add("dark-theme"),document.querySelector(".theme-changer__button").classList.add("_active"))})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".popup-call"),t=document.querySelector(".menu-header__item_popup-call"),n=document.querySelector(".menu-footer__popup-button"),a=document.querySelector(".dropdown-menu__popup-button"),o=document.querySelector(".popup-call__close-button"),s=document.querySelector(".form-popup__button_expand"),c=document.querySelector(".form-popup__input_expand");o.addEventListener("click",(()=>{e.classList.toggle("_active")})),t.addEventListener("click",(()=>{e.classList.toggle("_active")})),a.addEventListener("click",(()=>{e.classList.toggle("_active")})),n.addEventListener("click",(()=>{e.classList.toggle("_active")})),s.addEventListener("click",(()=>{s.classList.toggle("_hidden"),setTimeout(s.style.position="absolute",300),c.classList.toggle("_active")}))})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("body");header=document.querySelector(".header"),headerMenu=document.querySelector(".search-header__menu"),headerBurger=document.querySelector(".search-header__burger"),headerDropdownMenu=document.querySelector(".search-header__dropdown"),headerSearch=document.querySelector(".search-header"),headerSearchLowres=document.querySelector(".search-header__button_lowres"),headerSearchForm=document.querySelector(".search-header__item"),headerSearchInput=document.querySelector(".search-header__input"),themeChangerButton=document.querySelector(".theme-changer__button"),headerCart=document.querySelector(".search-header__button_buy");new IntersectionObserver((function(e,t){e[0].isIntersecting?header.classList.remove("_scroll"):header.classList.add("_scroll")})).observe(header);const t=document.querySelector(".announcement-header__close-button");"hidden"==getCookie("announcement")&&(t.parentNode.style.transition="none",t.parentNode.classList.add("_hidden"),header.classList.add("_no-announcement")),t.addEventListener("click",(()=>{t.parentNode.classList.add("_hidden"),header.classList.add("_no-announcement");let e=new Date;e.setHours(e.getHours()+1),e=e.toUTCString(),setCookie("announcement","hidden",{sameSite:"Strict",expires:e})}));let n=document.querySelector(".search-header__counter");function a(e){e.classList.remove("_hover"),e.lastElementChild.classList.contains("dropdown-menu__sublist")&&Array.from(e.lastElementChild.children).forEach((e=>{e.classList.contains("_hover")&&(a(e),e.classList.remove("_hover"))}))}null!=getCookie("totalQuantity")&&(n.innerHTML=getCookie("totalQuantity")),"0"!=n.innerHTML&&n.classList.add("_active"),headerMenu.addEventListener("click",(t=>{Array.from(headerDropdownMenu.querySelector(".dropdown-menu__list").children).forEach((e=>{e.classList.contains("_hover")&&a(e)})),headerBurger.classList.toggle("_active"),headerMenu.classList.toggle("_active"),document.documentElement.clientWidth<=720&&e.classList.add("_no-scroll")})),document.addEventListener("click",(t=>{const n=t.target;(!n.closest(".search-header__menu")&&!n.closest(".search-header__dropdown")||n.closest(".dropdown-menu__free-space-cover")||n.closest(".dropdown-menu__close-button"))&&headerBurger.classList.contains("_active")&&(Array.from(headerDropdownMenu.querySelector(".dropdown-menu__list").children).forEach((e=>{e.classList.contains("_hover")&&a(e)})),headerBurger.classList.remove("_active"),headerMenu.classList.remove("_active"),document.documentElement.clientWidth<=720&&e.classList.remove("_no-scroll"))})),window.addEventListener("resize",(t=>{document.documentElement.clientWidth>720&&e.classList.contains("_no-scroll")&&e.classList.remove("_no-scroll")})),headerDropdownMenu.addEventListener("mouseover",(e=>{if(document.documentElement.clientWidth>720){const t=e.target;let n;t.closest(".dropdown-menu__item")&&(t.closest(".dropdown-menu__item").classList.add("_hover"),n=Array.from(t.closest(".dropdown-menu__item").parentNode.children),n.forEach((e=>{t.closest(".dropdown-menu__item")!=e&&e.classList.contains("_hover")&&a(e)})))}})),window.addEventListener("resize",(e=>{if(document.documentElement.clientWidth<721){let e=headerDropdownMenu.querySelector("._hover");e&&e.classList.remove("_hover")}})),header.addEventListener("click",(e=>{const t=e.target;if(t.closest(".dropdown-menu__expand-button")){const e=t.closest(".dropdown-menu__item").querySelector(".dropdown-menu__sublist"),n=t.closest(".dropdown-menu__expand-button");$(e).slideToggle(),n.classList.toggle("_active")}})),window.addEventListener("resize",(e=>{document.documentElement.clientWidth>720&&(sublistArr=Array.from(document.querySelectorAll(".dropdown-menu__sublist")),sublistArr.forEach((e=>{"none"==getComputedStyle(e).display&&(e.style.display="block")})))})),headerSearch.addEventListener("click",(e=>{const t=e.target;document.documentElement.clientWidth<720&&(t.closest(".search-header__button_lowres")||t.closest(".search-header__icon_close"))&&(headerSearchLowres.classList.toggle("_active"),headerSearchForm.classList.toggle("_active"))})),document.addEventListener("click",(e=>{const t=e.target;document.documentElement.clientWidth<720&&!t.closest(".search-header__item")&&!t.closest(".search-header__button_lowres")&&headerSearchForm.classList.contains("_active")&&(headerSearchLowres.classList.remove("_active"),headerSearchForm.classList.remove("_active"))})),themeChangerButton.addEventListener("click",(t=>{e.classList.contains("dark-theme")?setCookie("theme","bright",{sameSite:"Strict",expires:"Tue, 19 Jan 2038 03: 14: 07 GMT"}):setCookie("theme","dark",{sameSite:"Strict",expires:"Tue, 19 Jan 2038 03: 14: 07 GMT"}),themeChangerButton.classList.toggle("_active"),e.classList.toggle("dark-theme")}))})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".main__cart"),t=document.querySelector(".search-header__counter"),n=document.querySelector(".form-cart"),a=document.querySelector(".cart__cover");let o=document.cookie.split("; "),s=[];function c(t){const n=e.querySelector('.search-data__row[data-id="'+t+'"]');n.classList.add("_delete"),null==n.querySelector(".search-data__delete-title")&&n.insertAdjacentHTML("beforeend",'\n            <h2 class="search-data__delete-title">Товар будет удален из корзины</h2>\n            <button class="search-data__delete-button" type="button">\n                <span class="search-data__text">Продолжить</span>\n                <svg class="search-data__icon search-data__icon_delete">\n                    <use xlink:href="#delete"></use>\n                </svg >\n            </button>\n            <button class="search-data__cancel-button" type="button">\n                <span class="search-data__text">Отмена</span>\n                <svg class="search-data__icon search-data__icon_cancel">\n                    <use xlink:href="#cancel"></use>\n                </svg >\n            </button>\n            ')}function r(){const e=Array.from(document.querySelectorAll(".search-data__row"));let t=0,n=0,a=document.querySelector(".total__price-old"),o=document.querySelector(".total__price-new");e.forEach((e=>{let n=e.querySelector(".search-data__text_price").innerHTML.split("₽")[0],a=e.querySelector(".search-data__text_quantity").innerHTML;-1!=n.indexOf(",")&&(n=n.split(",")[0]+n.split(",")[1]),t+=+n*+a})),n=(.95*t).toFixed(2),t=i(`${t}`),n=i(`${n}`),a.innerHTML=`${t}₽`,o.innerHTML=`${n}₽`}function d(){const e=Array.from(document.querySelectorAll(".search-data__row")),t=document.querySelector(".form-cart__input_hidden"),n=document.querySelector(".total__price-old").innerHTML,a=document.querySelector(".total__price-new").innerHTML;t.innerHTML="",e.forEach((e=>{const n=e.querySelector(".search-data__text_brand").innerHTML,a=e.querySelector(".search-data__text_quantity").innerHTML;t.insertAdjacentText("afterbegin",`Товар: ${n}, количество: ${a};\n`)})),t.insertAdjacentText("beforeend",`Общая цена: ${n}; \n`),t.insertAdjacentText("beforeend",`Общая цена со скидкой: ${a};`)}function i(e){return e.toString().replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1,")}o.map((function(e){"beget"!=e.split("=")[0]&&"announcement"!=e.split("=")[0]&&"totalQuantity"!=e.split("=")[0]&&"theme"!=e.split("=")[0]&&"_ym_uid"!=e.split("=")[0]&&"_ym_d"!=e.split("=")[0]&&"_ym_isad"!=e.split("=")[0]&&s.push(e)})),s.length>0&&""!=s[0]?async function(){let e=await fetch("json/data.json",{method:"GET"});if(e.ok){!function(e){const t=document.querySelector(".cart__data");e.forEach((e=>{s.forEach((n=>{let a=n.split("=")[0],o=n.split("=")[1],s=fixString(n.split("=")[0].split("__")[1],"_"," "),c=fixString(n.split("=")[0].split("__")[0],"_"," ");if(""!=e.col1&&s.length>2&&e.col2==s){const n=e.col4,r=e.col6,d=e.col8;let i=`\n                    <svg class="search-data__icon search-data__icon_exclamation">\n                        <use xlink:href="#exclamation"></use>\n                    </svg >\n                    <span class="search-data__text search-data__text_exclamation">\n                        Недостаточно в наличии (${d}).\n                        Мы закажем необходимое количество и свяжемся с вами.\n                    </span>\n                    `,l="";o>d&&(l="_active-exclamation");let _=`\n                <div data-id="${a}" data-quantity="${d}" class="search-data__row">\n                    <div class="search-data__block search-data__block_brand">\n                        <span class="search-data__text search-data__text_brand">${c} ${s}</span>\n                    </div>\n                    <a href="product?id=${a}" class="search-data__block search-data__block_description">\n                        <span class="search-data__text search-data__text_description">${n}</span>\n                    </a>\n                    <div class="search-data__block search-data__block_price">\n                        <span class="search-data__text search-data__text_price">${r}₽</span>\n                    </div>\n                    <div class="search-data__block search-data__block_quantity ${l}">\n                        <button class="search-data__button search-data__button_minus" type="button">-</button>\n                        <span class="search-data__text search-data__text_quantity">${o}</span>\n                        <button class="search-data__button search-data__button_plus" type="button">+</button>\n                        ${i}\n                    </div>\n                    <button class="search-data__button search-data__button_delete" type="button">\n                        <svg class="search-data__icon search-data__icon_delete">\n                            <use xlink:href="#delete"></use>\n                        </svg >\n                    </button>\n                </div>\n                `;t.insertAdjacentHTML("afterbegin",_)}}))})),a.style.display="none",r(),d()}(await e.json())}else alert("something went wrong...")}():(a.style.display="none",e.classList.add("_empty")),e.addEventListener("click",(n=>{const a=n.target;if(a.closest(".search-data__button_minus")){const e=a.closest(".search-data__button").parentNode.parentNode,n=e.dataset.id;let o=+a.closest(".search-data__button").nextElementSibling.innerHTML;a.closest(".search-data__button_minus").setAttribute("disabled",!0),o>1?(changeQuantity(n,-1),changeQuantity("totalQuantity",-1),t.innerHTML=+t.innerHTML-1,o-=1,a.closest(".search-data__button").nextElementSibling.innerHTML=o,o<=+e.dataset.quantity&&e.querySelector(".search-data__block_quantity").classList.remove("_active-exclamation")):c(n),r(),d(),a.closest(".search-data__button_minus").removeAttribute("disabled")}if(a.closest(".search-data__button_plus")){const e=a.closest(".search-data__button").parentNode.parentNode,n=e.dataset.id;let o=+a.closest(".search-data__button").previousElementSibling.innerHTML;a.closest(".search-data__button_plus").setAttribute("disabled",!0),changeQuantity(n,1),changeQuantity("totalQuantity",1),t.innerHTML=+t.innerHTML+1,o+=1,a.closest(".search-data__button").previousElementSibling.innerHTML=o,o>+e.dataset.quantity&&e.querySelector(".search-data__block_quantity").classList.add("_active-exclamation"),r(),d(),a.closest(".search-data__button_plus").removeAttribute("disabled")}if(a.closest(".search-data__button_delete")){c(a.closest(".search-data__button_delete").parentNode.dataset.id)}if(a.closest(".search-data__cancel-button")&&a.closest(".search-data__cancel-button").parentNode.classList.remove("_delete"),a.closest(".search-data__delete-button")){const n=a.closest(".search-data__delete-button").parentNode.dataset.id,o=a.closest(".search-data__delete-button").parentNode.querySelector(".search-data__text_quantity").innerHTML;a.closest(".search-data__delete-button").parentNode.remove(),r(),d(),deleteCookie(n),changeQuantity("totalQuantity",-o),getCookie("totalQuantity")?t.innerHTML=+getCookie("totalQuantity"):(t.innerHTML="",t.style.display="none",e.classList.add("_empty"))}})),n.addEventListener("submit",(()=>{setCookie("cartRequestSent","true",{sameSite:"Strict",expires:"Tue, 19 Jan 2038 03: 14: 07 GMT"})}))})),document.addEventListener("DOMContentLoaded",(()=>{$(".title-footer").click((function(){document.documentElement.clientWidth<=560&&($(this).next().slideToggle(),$(this).next().hasClass("contacts-footer__wrapper")&&$(this).next().css("display","flex"),$(this).toggleClass("_active"))})),$(window).resize((function(){document.documentElement.clientWidth>560&&($(".title-footer").next().css("display","block"),$(".title-footer").next().hasClass("contacts-footer__wrapper")&&$(".contacts-footer__wrapper").css("display","flex"),$(".title-footer").hasClass("_active")&&$(".title-footer").removeClass("_active")),document.documentElement.clientWidth<=560&&($(".title-footer").hasClass("_active")||$(".title-footer").next().css("display","none"))}))}));